<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-100">
<head>
    <title>{{ with .Title }}{{ . }}{{ else }}Hello, Arrower!{{ end }}</title>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="description" content="" />

    <script src="js/htmx.org/1.9.5/htmx.min.js"></script>
    <script src="js/htmx.org/1.9.5/head-support.js"></script>
    <script src="js/htmx.org/1.9.5/preload.js"></script>
    <script src="js/htmx.org/1.9.5/multi-swap.js"></script>

    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
    <script>
        tailwind.config = {
            theme: {},
            plugins: [
                require('@tailwindcss/forms'),
            ],
        }
    </script>
    <link rel="stylesheet" href="css/main.css">
</head>
<body hx-boost="true" hx-ext="head-support,preload" class="h-full">

<!-- TODO MAKE ONE FLASH CONTAINER THAT HOLDS AND LISTS MULTIPLE MESSAGES -->
<div class="absolute right-0 mt-16 mr-36">
    {{ range .Flashes }}
    <div class="flex items-center px-4 py-3 rounded-lg bg-green-600 text-white" role="alert">
        <svg class="fill-current w-4 h-4 mr-2" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path d="M12.432 0c1.34 0 2.01.912 2.01 1.957 0 1.305-1.164 2.512-2.679 2.512-1.269 0-2.009-.75-1.974-1.99C9.789 1.436 10.67 0 12.432 0zM8.309 20c-1.058 0-1.833-.652-1.093-3.524l1.214-5.092c.211-.814.246-1.141 0-1.141-.317 0-1.689.562-2.502 1.117l-.528-.88c2.572-2.186 5.531-3.467 6.801-3.467 1.057 0 1.233 1.273.705 3.23l-1.391 5.352c-.246.945-.141 1.271.106 1.271.317 0 1.357-.392 2.379-1.207l.6.814C12.098 19.02 9.365 20 8.309 20z"/>
        </svg>
        <p>{{ . }}</p>
    </div>
    {{ end }}
</div>

<div class="min-h-full">
    {{ if .ShowLoggedInAsUserBanner }}
        <div class="bg-green-600 px-4 py-2 text-white flex justify-between items-center">
            <div></div>
            <div class="flex space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
                <p>Du bist als Administrator gerade angemeldet f√ºr Nutzer: </p>
            </div>
            <button class="bg-white text-green-600 rounded px-2 py-1 font-bold">
                <a href="/admin/auth/leave_user">Administration</a>
            </button>
        </div>
    {{ end }}

    <nav class="w-full flex flex-col flex-wrap sm:flex-row sm:flex-nowrap bg-green-200 py-2 px-4">
        <div class="basis-2/12 w-full shrink grow-0">
            <a href="/">
                <svg id="logo"class="h-8 w-8" viewBox="0 0 42 38" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M5.74661 28.7259C7.28678 29.8002 9.78389 29.8002 11.3241 28.7259C12.8642 27.6516 12.8642 25.9098 11.3241 24.8355C9.78389 23.7612 7.28678 23.7612 5.74661 24.8355C4.20644 25.9098 4.20644 27.6516 5.74661 28.7259Z" class="ccustom" fill="#25CAAC"></path> <path d="M21.7322 14.1371C24.0425 15.7485 27.7881 15.7485 30.0984 14.1371C32.4086 12.5256 32.4086 9.91298 30.0984 8.30155C27.7881 6.69011 24.0425 6.69011 21.7322 8.30155C19.422 9.91298 19.422 12.5256 21.7322 14.1371Z" class="ccustom" fill="#25CAAC"></path> <path d="M13.2464 21.4315C15.1716 22.7743 18.293 22.7743 20.2182 21.4315C22.1434 20.0886 22.1434 17.9114 20.2182 16.5685C18.293 15.2257 15.1716 15.2257 13.2464 16.5685C11.3212 17.9114 11.3212 20.0886 13.2464 21.4315Z" class="ccustom" fill="#25CAAC"></path> <path d="M0.866345 20.4589C2.02147 21.2646 3.8943 21.2646 5.04943 20.4589C6.20455 19.6532 6.20455 18.3469 5.04943 17.5411C3.8943 16.7354 2.02147 16.7354 0.866345 17.5411C-0.288782 18.3469 -0.288781 19.6532 0.866345 20.4589Z" class="ccustom" fill="#25CAAC"></path> <path d="M13.2464 5.87008C15.1716 7.21294 18.293 7.21294 20.2182 5.87008C22.1434 4.52722 22.1434 2.35001 20.2182 1.00715C18.293 -0.335715 15.1716 -0.335716 13.2464 1.00715C11.3212 2.35001 11.3212 4.52722 13.2464 5.87008Z" class="ccustom" fill="#25CAAC"></path> <path d="M5.74661 13.1645C7.28678 14.2388 9.78389 14.2388 11.3241 13.1645C12.8642 12.0902 12.8642 10.3484 11.3241 9.27415C9.78389 8.19986 7.28678 8.19986 5.74661 9.27415C4.20644 10.3484 4.20645 12.0902 5.74661 13.1645Z" class="ccustom" fill="#25CAAC"></path> <path d="M13.2464 36.9929C15.1716 38.3357 18.293 38.3357 20.2182 36.9929C22.1434 35.65 22.1434 33.4728 20.2182 32.1299C18.293 30.7871 15.1716 30.7871 13.2464 32.1299C11.3212 33.4728 11.3212 35.65 13.2464 36.9929Z" class="ccustom" fill="#25CAAC"></path> <path d="M31.9011 21.9178C34.2114 23.5292 37.9571 23.5292 40.2673 21.9178C42.5776 20.3064 42.5776 17.6937 40.2673 16.0823C37.9571 14.4708 34.2114 14.4708 31.9011 16.0823C29.5909 17.6937 29.5909 20.3064 31.9011 21.9178Z" class="ccustom" fill="#25CAAC"></path> <path d="M21.7322 29.6984C24.0425 31.3099 27.7881 31.3099 30.0984 29.6984C32.4086 28.087 32.4086 25.4744 30.0984 23.8629C27.7881 22.2515 24.0425 22.2515 21.7322 23.8629C19.422 25.4744 19.422 28.087 21.7322 29.6984Z" class="ccustom" fill="#25CAAC"></path> </svg>
            </a>
        </div>
        <div class="w-full grow">
            <div class="flex w-full flex-row flex-wrap">
                <div class="grow flex items-baseline">
                    <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
                    <a href="/" class="bg-green-600 text-white rounded-md px-3 py-2 text-sm font-medium" aria-current="page">Home</a>
                    {{ if .ShowAdminBtn }}<a href="/admin" class="text-gray-500 hover:bg-green-300 hover:text-green-600 rounded-md px-3 py-2 text-sm font-medium">Admin</a>{{ end }}
                    {{ if .ShowLoginBtn }}<a href="/auth/login" class="text-gray-500 hover:bg-green-300 hover:text-green-600 rounded-md px-3 py-2 text-sm font-medium">Login</a>{{ end }}
                    {{ if .ShowLogoutBtn }}<a href="/auth/logout" class="text-gray-500 hover:bg-green-300 hover:text-green-600 rounded-md px-3 py-2 text-sm font-medium">Logout</a>{{ end }}
                    {{ if .ShowRegistrationBtn }}<a href="/auth/register" class="text-gray-500 hover:bg-green-300 hover:text-green-600 rounded-md px-3 py-2 text-sm font-medium">Register</a>{{ end }}
                </div>
                <div class="shrink">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-300">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                    </svg>
                </div>
            </div>
        </div>
        <div class="basis-1/12 w-full shrink grow-0"><!-- 3-col layout --></div>
    </nav>
    <div class="bg-green-200 flex pt-2">
        <div class="w-2/12 shrink grow-0"></div>
        <div class="bg-green-300 h-0.5 w-full grow rounded-lg"></div>
        <div class="w-1/12 shrink grow-0"></div>
    </div>

{{/*    TODO rename Context-Layout in some way to make the language clearer */}}
    {{ block "layout" . }}
        <div class="w-full flex flex-col flex-wrap sm:flex-row sm:flex-nowrap bg-green-200">
            <div class="basis-2/12 w-full grow-0 px-4 mt-8">
                <div class="bg-green-200"></div>
                <nav class="m-0 p-0">
                    <a href="/" class="text-gray-500 flex hover:bg-green-300 hover:text-green-600 px-3 py-2 rounded">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                        </svg>
                        <span class="pl-1">Home</span>
                    </a>

                    <hr class="border-2 rounded border-green-300 w-3/4" />

                    <span class="text-gray-500 flex px-3 py-2 rounded">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                        </svg>
                        <span class="pl-1">Auth</span>
                    </span>

                    <a href="/admin/auth/users" class="text-gray-500 flex hover:bg-green-300 hover:text-green-600 px-3 py-2 pl-10 rounded">Users</a>
                    <a href="/admin/auth/settings" class="text-gray-500 flex hover:bg-green-300 hover:text-green-600 px-3 py-2 pl-10 rounded"><i>Settings</i></a>

                    <hr class="border-2 rounded border-green-300 w-3/4" />

                    <span class="text-gray-500 flex px-3 py-2 rounded">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z" />
                        </svg>
                        <span class="pl-1">Jobs</span>
                    </span>

                    <a href="/admin/jobs" class="text-gray-500 flex hover:bg-green-300 hover:text-green-600 px-3 py-2 pl-10 rounded">Queues</a>
                    <a href="/admin/jobs/schedule" class="text-gray-500 flex hover:bg-green-300 hover:text-green-600 px-3 py-2 pl-10 rounded">Schedule Job</a>
                    <a href="/admin/jobs/workers" class="text-gray-500 flex hover:bg-green-300 hover:text-green-600 px-3 py-2 pl-10 rounded">Workers</a>
                    <a href="/admin/jobs/maintenance" class="text-gray-500 flex hover:bg-green-300 hover:text-green-600 px-3 py-2 pl-10 rounded">Maintenance</a>

                    <hr class="border-2 rounded border-green-300 w-3/4" />
                    <a href="/admin/routes" class="text-gray-500 flex hover:bg-green-300 hover:text-green-600 px-3 py-2 rounded">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                        </svg>
                        <span class="pl-1">Routes</span>
                    </a>
                    <a href="/admin/settings" class="text-gray-500 flex hover:bg-green-300 hover:text-green-600 px-3 py-2 rounded">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        <span class="pl-1">Settings</span>
                    </a>
                    <a href="/admin/logs/" class="text-gray-500 flex hover:bg-green-300 hover:text-green-600 px-3 py-2 rounded">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" />
                        </svg>
                        <span class="pl-1">Logs</span>
                    </a>
                </nav>
            </div>
            <div class="w-full">
                <header class="w-full grow bg-green-200 py-4">
                    <h1 class="text-4xl font-bold tracking-tight text-gray-900">{{ block "admin.title" . }}Admin Dashboard{{end}}</h1>
                </header>
                <div class="w-full grow bg-white p-6 rounded-t-lg rounded-l-lg">
                    <main class="bg-white">
                            {{block "content" .}}
                                Fallback, if "content" is not defined elsewhere
                            {{end}}
                    </main>
                </div>
            </div>
            <div class="basis-1/12 w-full shrink grow-0"><!-- 3-col layout -->
                <div class="bg-green-200 h-16"></div>
            </div>
        </div>
    {{end}}

    <footer class="w-full flex flex-row flex-nowrap">
        <div class="basis-2/12 w-full grow-0 bg-green-200"><!-- 3-col layout --></div>
        <div class="w-full grow bg-green-200">
            <div class="w-full flex py-6">
                <div class="basis-3/12 grow text-left"></div>
                <div class="basis-3/12 grow text-center"></div>
                <div class="basis-3/12 grow text-right px-4">Arrower @latest</div>
            </div>
        </div>
        <div class="basis-1/12 w-full shrink grow-0"><!-- 3-col layout --></div>
    </footer>
</div>

{{ block "page.js" . }}{{end}}
</body>
</html>