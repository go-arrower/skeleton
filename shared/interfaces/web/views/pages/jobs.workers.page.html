{{ define "admin.title" }}Active Worker Pools{{ end }}


<table hx-get="/admin/jobs/workers"
       hx-trigger="every 10s"
       hx-target="tbody"
       hx-swap="outerHTML"
       hx-select="tbody"
       hx-disinherit="hx-target hx-swap hx-select"
       class="table-auto border border-collapse text-left">
    <thead class="bg-gray-100">
    <tr>
        <th scope="col" class="p-1 border border-slate-300">Instance name</th>
        <th scope="col" class="p-1 border border-slate-300">Queue</th>
        <th scope="col" class="p-1 border border-slate-300">Workers</th>
        <th scope="col" class="p-1 border border-slate-300">Last seen at</th>
    </tr>
    </thead>
    <tbody>
    {{ range .workers }}
        <tr class="odd:bg-white even:bg-slate-50" title="Last seen {{ .NotSeenSince }} ago">
            <td class="p-1">{{ .ID }}</td>
            <td class="p-1">
                <a href="/admin/jobs/{{ .Queue }}">{{ .Queue }}</a>
            </td>
            <td class="p-1">{{ .Workers }}</td>
            <td class="p-1 {{ .LastSeenAtColour }}">{{ .LastSeenAt }}</td>
        </tr>
    {{ end }}
    </tbody>
</table>